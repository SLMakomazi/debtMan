{"ast":null,"code":"import _objectSpread from\"C:/Users/Wipro/CascadeProjects/debtMan/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import api from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{const storedUser=localStorage.getItem('user');if(storedUser){setUser(JSON.parse(storedUser));api.defaults.headers.Authorization=\"Bearer \".concat(JSON.parse(storedUser).token);}setLoading(false);},[]);const login=async(email,password)=>{try{const response=await api.post('/auth/login',{email,password});const{user,token}=response.data;localStorage.setItem('user',JSON.stringify(_objectSpread(_objectSpread({},user),{},{token})));api.defaults.headers.Authorization=\"Bearer \".concat(token);setUser(_objectSpread(_objectSpread({},user),{},{token}));toast.success('Login successful!');return true;}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed');return false;}};const logout=()=>{localStorage.removeItem('user');delete api.defaults.headers.Authorization;setUser(null);navigate('/login');};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,loading,login,logout},children:!loading&&children});};export const useAuth=()=>{return React.useContext(AuthContext);};","map":{"version":3,"names":["React","createContext","useState","useEffect","useNavigate","toast","api","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","loading","setLoading","navigate","storedUser","localStorage","getItem","JSON","parse","defaults","headers","Authorization","concat","token","login","email","password","response","post","data","setItem","stringify","_objectSpread","success","error","_error$response","_error$response$data","message","logout","removeItem","Provider","value","useAuth","useContext"],"sources":["C:/Users/Wipro/CascadeProjects/debtMan/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport api from '../services/api';\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      setUser(JSON.parse(storedUser));\n      api.defaults.headers.Authorization = `Bearer ${JSON.parse(storedUser).token}`;\n    }\n    setLoading(false);\n  }, []);\n\n  const login = async (email, password) => {\n    try {\n      const response = await api.post('/auth/login', { email, password });\n      const { user, token } = response.data;\n      \n      localStorage.setItem('user', JSON.stringify({ ...user, token }));\n      api.defaults.headers.Authorization = `Bearer ${token}`;\n      setUser({ ...user, token });\n      \n      toast.success('Login successful!');\n      return true;\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Login failed');\n      return false;\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('user');\n    delete api.defaults.headers.Authorization;\n    setUser(null);\n    navigate('/login');\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, loading, login, logout }}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  return React.useContext(AuthContext);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}